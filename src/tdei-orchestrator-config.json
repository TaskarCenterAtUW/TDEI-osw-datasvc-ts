{
    "$schema": "../schema/tdei-orchestrator.schema.json",
    "workflows": [
        {
            "group": "UPLOAD_OSW",
            "stage": "VALIDATION",
            "type": "TRIGGER",
            "identifier": "OSW_UPLOAD_VALIDATION_REQUEST_WORKFLOW",
            "generic_workflow": true,
            "next_steps": [
                {
                    "process_identifier": "PUBLISH_HANDLER",
                    "params": {
                        "response_message_identifier": "OSW_UPLOAD_VALIDATION_RESPONSE_WORKFLOW",
                        "topic": "osw-validation-request"
                    }
                }
            ]
        },
        {
            "group": "UPLOAD_OSW",
            "stage": "VALIDATION",
            "type": "HANDLER",
            "identifier": "OSW_UPLOAD_VALIDATION_RESPONSE_WORKFLOW",
            "generic_workflow": true,
            "next_steps": [
                {
                    "process_identifier": "OSW_UPLOAD_VALIDATION_RESPONSE_HANDLER",
                    "params": {}
                }
            ]
        },
        {
            "group": "PUBLISH_OSW",
            "stage": "VALIDATION",
            "type": "TRIGGER",
            "identifier": "OSW_PUBLISH_VALIDATION_REQUEST_WORKFLOW",
            "next_steps": [
                {
                    "process_identifier": "PUBLISH_HANDLER",
                    "params": {
                        "response_message_identifier": "OSW_PUBLISH_VALIDATION_RESPONSE_WORKFLOW",
                        "topic": "osw-validation-request"
                    }
                }
            ]
        },
        {
            "group": "PUBLISH_OSW",
            "stage": "VALIDATION",
            "type": "HANDLER",
            "identifier": "OSW_PUBLISH_VALIDATION_RESPONSE_WORKFLOW",
            "next_steps": [
                {
                    "process_identifier": "OSW_PUBLISH_VALIDATION_RESPONSE_HANDLER",
                    "params": {},
                    "delegate_worflow": [
                        "OSW_PUBLISH_FORMATTING_REQUEST_WORKFLOW"
                    ]
                }
            ]
        },
        {
            "group": "PUBLISH_OSW",
            "stage": "FILE_FORMATTING",
            "type": "TRIGGER",
            "identifier": "OSW_PUBLISH_FORMATTING_REQUEST_WORKFLOW",
            "next_steps": [
                {
                    "process_identifier": "PUBLISH_HANDLER",
                    "params": {
                        "response_message_identifier": "OSW_PUBLISH_FORMATTING_RESPONSE_WORKFLOW",
                        "topic": "osw-formatting-request"
                    }
                }
            ]
        },
        {
            "group": "PUBLISH_OSW",
            "stage": "FILE_FORMATTING",
            "type": "HANDLER",
            "identifier": "OSW_PUBLISH_FORMATTING_RESPONSE_WORKFLOW",
            "next_steps": [
                {
                    "process_identifier": "OSW_PUBLISH_FORMATTING_RESPONSE_HANDLER",
                    "params": {},
                    "delegate_worflow": [
                        "OSW_PUBLISH_CONFIDENCE_REQUEST_WORKFLOW"
                    ]
                }
            ]
        },
        {
            "group": "PUBLISH_OSW",
            "stage": "CONFIDENCE_METRIC",
            "type": "TRIGGER",
            "identifier": "OSW_PUBLISH_CONFIDENCE_REQUEST_WORKFLOW",
            "next_steps": [
                {
                    "process_identifier": "PUBLISH_HANDLER",
                    "params": {
                        "response_message_identifier": "OSW_PUBLISH_CONFIDENCE_RESPONSE_WORKFLOW",
                        "topic": "osw-confidence-request"
                    }
                }
            ]
        },
        {
            "group": "PUBLISH_OSW",
            "stage": "CONFIDENCE_METRIC",
            "type": "HANDLER",
            "identifier": "OSW_PUBLISH_CONFIDENCE_RESPONSE_WORKFLOW",
            "next_steps": [
                {
                    "process_identifier": "OSW_PUBLISH_CONFIDENCE_RESPONSE_HANDLER",
                    "params": {},
                    "delegate_worflow": [
                        "OSW_PUBLISH_DATASET_FLATTENING_REQUEST_WORKFLOW"
                    ]
                }
            ]
        },
        {
            "group": "PUBLISH_OSW",
            "stage": "DATASET_FLATTENING",
            "type": "TRIGGER",
            "identifier": "OSW_PUBLISH_DATASET_FLATTENING_REQUEST_WORKFLOW",
            "next_steps": [
                {
                    "process_identifier": "PUBLISH_HANDLER",
                    "params": {
                        "response_message_identifier": "OSW_PUBLISH_DATASET_FLATTENING_RESPONSE_WORKFLOW",
                        "topic": "extract-load-request"
                    }
                }
            ]
        },
        {
            "group": "PUBLISH_OSW",
            "stage": "DATASET_FLATTENING",
            "type": "HANDLER",
            "identifier": "OSW_PUBLISH_DATASET_FLATTENING_RESPONSE_WORKFLOW",
            "next_steps": [
                {
                    "process_identifier": "OSW_PUBLISH_DATASET_FLATTENING_RESPONSE_HANDLER",
                    "params": {},
                    "delegate_worflow": [
                        "OSW_PUBLISH_DATABASE_WORKFLOW"
                    ]
                }
            ]
        },
        {
            "group": "PUBLISH_OSW",
            "stage": "DATABASE_PUBLISH",
            "type": "HANDLER",
            "identifier": "OSW_PUBLISH_DATABASE_WORKFLOW",
            "next_steps": []
        },
        {
            "group": "VALIDATION_ONLY_OSW",
            "stage": "VALIDATION",
            "type": "TRIGGER",
            "identifier": "OSW_VALIDATION_ONLY_VALIDATION_REQUEST_WORKFLOW",
            "generic_workflow": true,
            "next_steps": [
                {
                    "process_identifier": "PUBLISH_HANDLER",
                    "params": {
                        "response_message_identifier": "OSW_VALIDATION_ONLY_VALIDATION_RESPONSE_WORKFLOW",
                        "topic": "osw-validation-request"
                    }
                }
            ]
        },
        {
            "group": "VALIDATION_ONLY_OSW",
            "stage": "VALIDATION",
            "type": "HANDLER",
            "identifier": "OSW_VALIDATION_ONLY_VALIDATION_RESPONSE_WORKFLOW",
            "generic_workflow": true,
            "next_steps": [
                {
                    "process_identifier": "OSW_VALIDATION_ONLY_VALIDATION_RESPONSE_HANDLER",
                    "params": {}
                }
            ]
        },
        {
            "group": "OSW_ON_DEMAND_FORMATTING",
            "stage": "FORMATTING",
            "type": "TRIGGER",
            "identifier": "OSW_ON_DEMAND_FORMATTING_REQUEST_WORKFLOW",
            "generic_workflow": true,
            "next_steps": [
                {
                    "process_identifier": "PUBLISH_HANDLER",
                    "params": {
                        "response_message_identifier": "OSW_ON_DEMAND_FORMATTING_RESPONSE_WORKFLOW",
                        "topic": "osw-formatting-request"
                    }
                }
            ]
        },
        {
            "group": "OSW_ON_DEMAND_FORMATTING",
            "stage": "FORMATTING",
            "type": "HANDLER",
            "identifier": "OSW_ON_DEMAND_FORMATTING_RESPONSE_WORKFLOW",
            "generic_workflow": true,
            "next_steps": [
                {
                    "process_identifier": "OSW_ON_DEMAND_FORMATTING_RESPONSE_HANDLER",
                    "params": {}
                }
            ]
        },
        {
            "group": "OSW_ON_DEMAND_CONFIDENCE_METRIC",
            "stage": "CONFIDENCE_METRIC",
            "type": "TRIGGER",
            "identifier": "OSW_ON_DEMAND_CONFIDENCE_METRIC_REQUEST_WORKFLOW",
            "generic_workflow": true,
            "next_steps": [
                {
                    "process_identifier": "PUBLISH_HANDLER",
                    "params": {
                        "response_message_identifier": "OSW_ON_DEMAND_CONFIDENCE_METRIC_RESPONSE_WORKFLOW",
                        "topic": "osw-confidence-request"
                    }
                }
            ]
        },
        {
            "group": "OSW_ON_DEMAND_CONFIDENCE_METRIC",
            "stage": "CONFIDENCE_METRIC",
            "type": "HANDLER",
            "identifier": "OSW_ON_DEMAND_CONFIDENCE_METRIC_RESPONSE_WORKFLOW",
            "generic_workflow": true,
            "next_steps": [
                {
                    "process_identifier": "OSW_ON_DEMAND_CONFIDENCE_METRIC_RESPONSE_HANDLER",
                    "params": {}
                }
            ]
        },
        {
            "group": "ON_DEMAND_DATASET_FLATTENING",
            "stage": "DATASET_FLATTENING",
            "type": "TRIGGER",
            "identifier": "ON_DEMAND_DATASET_FLATTENING_REQUEST_WORKFLOW",
            "generic_workflow": true,
            "next_steps": [
                {
                    "process_identifier": "PUBLISH_HANDLER",
                    "params": {
                        "response_message_identifier": "ON_DEMAND_DATASET_FLATTENING_RESPONSE_WORKFLOW",
                        "topic": "extract-load-request"
                    }
                }
            ]
        },
        {
            "group": "ON_DEMAND_DATASET_FLATTENING",
            "stage": "DATASET_FLATTENING",
            "type": "HANDLER",
            "identifier": "ON_DEMAND_DATASET_FLATTENING_RESPONSE_WORKFLOW",
            "generic_workflow": true,
            "next_steps": [
                {
                    "process_identifier": "ON_DEMAND_DATASET_FLATTENING_RESPONSE_HANDLER",
                    "params": {}
                }
            ]
        },
        {
            "group": "BACKEND_SERVICE",
            "stage": "PROCESSING",
            "type": "TRIGGER",
            "identifier": "BACKEND_SERVICE_REQUEST_WORKFLOW",
            "generic_workflow": true,
            "next_steps": [
                {
                    "process_identifier": "PUBLISH_HANDLER",
                    "params": {
                        "response_message_identifier": "BACKEND_SERVICE_RESPONSE_WORKFLOW",
                        "topic": "backend-request"
                    }
                }
            ]
        },
        {
            "group": "BACKEND_SERVICE",
            "stage": "PROCESSING",
            "type": "HANDLER",
            "identifier": "BACKEND_SERVICE_RESPONSE_WORKFLOW",
            "generic_workflow": true,
            "next_steps": [
                {
                    "process_identifier": "BACKEND_SERVICE_RESPONSE_HANDLER",
                    "params": {}
                }
            ]
        }
    ],
    "subscriptions": [
        {
            "description": "Subscription for osw validation completion",
            "topic": "osw-validation-response",
            "subscription": "res-handler"
        },
        {
            "description": "Subscription for osw formatting completion",
            "topic": "osw-formatting-response",
            "subscription": "res-handler"
        },
        {
            "description": "Subscription for osw confidence completion",
            "topic": "osw-confidence-response",
            "subscription": "res-handler"
        },
        {
            "description": "Subscription for extract load request completion",
            "topic": "extract-load-response",
            "subscription": "res-handler"
        },
        {
            "description": "Subscription for backend service completion",
            "topic": "backend-response",
            "subscription": "res-handler"
        }
    ]
}