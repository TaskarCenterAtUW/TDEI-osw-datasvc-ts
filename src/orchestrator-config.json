{
    "$schema": "./orchestrator.schema.json",
    "tasks": [
        {
            "task": "osw-upload",
            "workflow": [
                {
                    "event": "VALIDATION_COMPLETED",
                    "action": "subscribe",
                    "message-type": "osw-upload-validation-request",
                    "topic": "osw-validation-response",
                    "subscription": "osw-validation-response"
                }
            ]
        },
        {
            "task": "osw-publish",
            "workflow": [
                {
                    "event": "VALIDATION_COMPLETED",
                    "action": "subscribe",
                    "message-type": "osw-publish-validation-request",
                    "topic": "osw-validation-response",
                    "subscription": "osw-validation-response",
                    "next-event": "FORMATTING_REQUEST"
                },
                {
                    "event": "FORMATTING_REQUEST",
                    "action": "publish",
                    "message-type": "osw-publish-formatting-request",
                    "message-topic": "osw-formatting-request",
                    "data-keys": [
                        "tdei_record_id"
                    ]
                },
                {
                    "event": "FORMATTING_COMPLETED",
                    "action": "subscribe",
                    "message-type": "osw-publish-formatting-request",
                    "topic": "osw-formatting-response",
                    "subscription": "osw-formatting-response",
                    "next-event": "CONFIDENCE_REQUEST"
                },
                {
                    "event": "CONFIDENCE_REQUEST",
                    "action": "publish",
                    "message-type": "osw-publish-confidence-request",
                    "message-topic": "osw-confidence-request",
                    "data-keys": [
                        "tdei_record_id"
                    ]
                },
                {
                    "event": "CONFIDENCE_COMPLETED",
                    "action": "subscribe",
                    "message-type": "osw-publish-confidence-request",
                    "topic": "osw-confidence-response",
                    "subscription": "osw-confidence-response"
                }
            ]
        }
    ]
}